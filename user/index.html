<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>R3 CHAT</title>
<script src="js/jquery-1.12.1.min.js"></script>
<script src="js/firebase.js"></script>
</head>

<body style="text-align: center;">
<div>
	<h3 id="status">SignIn</h3>
	Enter Email<br><input type="email" id="lemail" placeholder="email"><br><br>
	Enter Password<br><input type="password" id="lpassword" placeholder="password"><br><br>
	<button id="logbtn">Login</button>
</div>
<hr>
<div>
	<h3 id="status1">SignUp</h3>
	Enter Name<br><input type="text" id="name" placeholder="name"><br><br>
	Enter Email<br><input type="email" id="email" placeholder="email"><br><br>
	Enter Password<br><input type="password" id="password" placeholder="password"><br><br>
	<button id="signbtn">SignUp</button>
	
</div>
<script>

</script>

<script type="text/javascript">
	var db=new Firebase("https://r3chat.firebaseio.com")
	$("#logbtn").on("click", function(){
			var email=$("#lemail").val();
			var password=$("#lpassword").val();
			db.authWithPassword({
				email:email,
				password:password		
			}, function(error, UserData){
				if(error==null){
					$("#status").html("LoggedIn")
					localStorage.setItem("currentUser",email);
					window.location="form.html";			
				}else
				{				
					$("#status").html("Failed")
				}
			});
	});
			
	$("#signbtn").on("click",function(){
			var email=$("#email").val();
			var password=$("#password").val();

	db.createUser({
			email:email,
			password:password

			}, function(error, UserData){
			if(error==null){
				$("#status1").html("Ivalid")
			}else
			{				
				$("#status1").html("Failed")
			}

			});
			db.child("users").push().set({
				email:email,
				role:"user",
				password:$("#password").val(),
				name:$("#name").val()
			}, function(error){}
			);
			
		});
</script>
</body>
</html>

